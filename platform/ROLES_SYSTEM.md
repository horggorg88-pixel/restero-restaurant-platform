# üé≠ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –¥–æ—Å—Ç—É–ø–æ–≤

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞–º–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω–∫–µ —Å–≤–æ–∏–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ –ø—Ä–∞–≤.

## –†–æ–ª–∏

### 1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** (`admin`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º –∞–¥–º–∏–Ω–∫–∏
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**:
  - ‚úÖ –°–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (`booking_list`)
  - ‚úÖ –î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞ (`gantt`)
  - ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`database`)
  - ‚úÖ –ü–æ–ø–∞–ø—ã (`popups`)
  - ‚úÖ –°–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–æ–≤ (`tables_list`)
  - ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞–º–∏ (`manage_accesses`)

### 2. **–ú–µ–Ω–µ–¥–∂–µ—Ä** (`manager`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**:
  - ‚ùå –°–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
  - ‚úÖ –î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞ (`gantt`) - **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è**
  - ‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
  - ‚ùå –ü–æ–ø–∞–ø—ã
  - ‚ùå –°–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–æ–≤
  - ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞–º–∏

## API Endpoints

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞–º–∏

#### `GET /api/restaurants/[id]/accesses`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–æ–≤ –∫ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": "access:1",
    "userId": "user:1",
    "restaurantId": "restaurant:1",
    "role": "admin",
    "isActive": true,
    "createdAt": "2024-01-01T00:00:00.000Z",
    "updatedAt": "2024-01-01T00:00:00.000Z",
    "user": {
      "id": "user:1",
      "firstName": "–ò–≤–∞–Ω",
      "lastName": "–ò–≤–∞–Ω–æ–≤",
      "email": "ivan@example.com"
    }
  }
]
```

#### `POST /api/restaurants/[id]/accesses`
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "email": "employee@example.com",
  "role": "manager"
}
```

#### `DELETE /api/restaurants/[id]/accesses/delete?accessId=[id]`
–£–¥–∞–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ

#### `POST /api/admin/check-access`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "restaurantId": "restaurant:1"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "hasAccess": true,
  "role": "admin",
  "permissions": ["booking_list", "gantt", "database", "popups", "tables_list", "manage_accesses"],
  "restaurant": {
    "id": "restaurant:1",
    "name": "–ú–æ–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω",
    "address": "—É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, 1"
  }
}
```

#### `GET /api/admin/restaurants`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤, –∫ –∫–æ—Ç–æ—Ä—ã–º —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø

**–û—Ç–≤–µ—Ç:**
```json
{
  "restaurants": [
    {
      "id": "restaurant:1",
      "name": "–ú–æ–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω",
      "address": "—É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, 1",
      "accessRole": "admin",
      "isOwner": true
    }
  ]
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π
```typescript
import { ROLES, hasPermission, isAdmin, isManager } from '@/lib/types/roles';

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∞–≤–∞
if (hasPermission(userRole, 'booking_list')) {
  // –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏
if (isAdmin(userRole)) {
  // –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
}

if (isManager(userRole)) {
  // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞
```typescript
const response = await fetch(`/api/restaurants/${restaurantId}/accesses`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    email: 'employee@example.com',
    role: 'manager'
  })
});
```

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–í–ª–∞–¥–µ–ª–µ—Ü —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–µ–µ—Ç —Ä–æ–ª—å `admin` –¥–ª—è –≤—Å–µ—Ö —Å–≤–æ–∏—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
2. **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏** –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–π —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫ –∞–¥–º–∏–Ω–∫–µ
4. **–†–æ–ª–∏ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è** –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∞–¥–º–∏–Ω–∫–∏ (`admin` –∏ `manager`)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ API endpoints —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞–º, –∫ –∫–æ—Ç–æ—Ä—ã–º –∏–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø
- –í–ª–∞–¥–µ–ª—å—Ü—ã —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç—É–ø–∞–º–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–∏—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤


